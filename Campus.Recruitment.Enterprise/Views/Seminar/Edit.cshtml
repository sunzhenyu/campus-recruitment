@{
    //判断是否登录
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "宣讲会发布信息";
}

<link href="/content/static/student/css/login/registerStep.css" rel="stylesheet">
<script async="" src="/content/static/zheyibu/components/google/gtm.js"></script>
<script src="/content/static/js/sea-modules/seajs/seajs/2.1.1/sea.js" type="text/javascript"></script>
<script src="/content/static/js/sea-modules/seajs/seajs-style/1.0.2/seajs-style.js" type="text/javascript"></script>
<script src="/content/static/js/corp/init.js"></script>
<script type="text/javascript">
    seajs.config({
        alias: {
            $: 'jquery/jquery/1.7.2/jquery',
            placeholder: 'jquery/placeholder/1.0.0/placeholder',
            dialog: 'arale/dialog/1.2.3/dialog',
            validator: 'arale/validator/0.9.7/validator'
        }
    });
</script>
<script src="/content/static/zheyibu/components/jQuery/jquery.min.js"></script>
<link href="/content/static/lib/js/enterprise/js/My97DatePicker/skin/WdatePicker.css" rel="stylesheet" type="text/css">
<style>
    .autocomplete-suggestions {
        border-color: #ddd;
    }

    .autocomplete-suggestion:hover {
        background-color: #ddd;
        color: #666;
    }

    .ui-text-m {
        width: 137px;
    }

    #OccurDate-error,
    #StartTime-error,
    #EndTime-error,
    #College-error,
    #Address-error,
    #Description-error {
        color: #fc5f27;
        padding-left: 10px;
    }
</style>
<div class="container">
    <div id="new-position-content">
        <div class="channel-hd">
            <div class="channel-hd-wrap">
                <div class="wrapper-1000 clearfix">
                    <h1 class="channel-hd-title">编辑宣讲会信息</h1>
                </div>
            </div>
        </div>
        <div class="channel-bd">
            <div class="wrapper-1000">
                <form action="/xjh/operatexjh" method="post" id="xjh-form" novalidate="novalidate">
                    <input name="__RequestVerificationToken" type="hidden" value="SHD_sJD0y8YJxgKMenIEf9hWQ0apH-gisUS5VLjIlI0MJPpeFVCKyW5CyCMp0M4qL9EIaVeouLvPoUDq_la6T6BX7JXTce7HZjO0RVvxR6Q1">
                    <input data-val="true" data-val-number="The field SeminarId must be a number." data-val-required="SeminarId 字段是必需的。" id="SeminarId" name="SeminarId" type="hidden" value="423268">
                    <div class="publish-wrap-bd">
                        <div class="publish-section" style="padding: 44px 0 0">
                            <div class="publish-section-bd">
                                <div class="ui-form-item">
                                    <label for="OccurDate" class="ui-label"><em class="rq">*</em>举办日期：</label>
                                    <input type="text" name="OccurDate" class="ui-text Wdate valid" id="OccurDate" value="2022-07-12" placeholder="选择日期" onfocus="WdatePicker({ readOnly: true, minDate: '%y-%M-%d' })" required="" aria-required="true" readonly="" aria-invalid="false">
                                    <div class="ui-form-explain"></div>
                                </div>
                                <div class="ui-form-item fulltime-item">
                                    <label for="StartTime" class="ui-label"><em class="rq">*</em>举办时间：</label>
                                    <input type="text" class="ui-text-m Wdate valid" id="StartTime" name="StartTime" value="13:00" placeholder="选择开始时间" onfocus="WdatePicker({ dateFmt: 'HH:mm', isShowToday: false, readOnly: true, hmsMenuCfg: { H: [1, 6], m: [15, 4] }, maxDate: '#F{$dp.$D(\'EndTime\')}' })" readonly="" aria-required="true" aria-invalid="false">
                                    <span class="to">至</span>
                                    <input type="text" class="ui-text-m Wdate" id="EndTime" name="EndTime" value="14:00" placeholder="选择结束时间" onfocus="WdatePicker({ dateFmt: 'HH:mm', isShowToday: false, readOnly: true, hmsMenuCfg: { H: [1, 6], m: [15, 4] }, minDate: '#F{$dp.$D(\'StartTime\')||\'H: M\'}' })">
                                    <div class="ui-form-explain" style="margin-left: 90px;"></div>
                                    <input type="hidden" name="occurDuration" id="occurDuration">
                                </div>
                                <div class="ui-form-item">
                                    <label for="College" class="ui-label"><em class="rq">*</em>举办学校：</label>
                                    <input type="text" name="College" class="ui-text" id="College" value="江汉大学" data-url="/xjh/schoolautocomplete" placeholder="填写学校名称" required="" aria-required="true">
                                    <div class="ui-form-explain"></div>
                                </div>
                            </div>
                            <div class="ui-form-item">
                                <label for="Address" class="ui-label"><em class="rq">*</em>具体地点：</label>
                                <input type="text" name="Address" class="ui-text" id="Address" value="J04 " placeholder="填写举办宣讲会的具体地址" required="" aria-required="true">
                                <div class="ui-form-explain"></div>
                            </div>
                            <div class="ui-form-item clear">
                                <label for="Description" class="ui-label"><em class="rq">*</em>描述：</label>
                                <textarea name="Description" class="ui-area" id="Description" placeholder="简单扼要地描述宣讲会内容" required="" aria-required="true">企业的发展方向</textarea>
                                <div class="ui-form-explain" style="left:130px;top:110px; margin-bottom:20px;"></div>
                            </div>
                        </div>
                        <div class="publish-action-wrap">
                            <div class="ui-form-button">
                                <button type="submit" id="zyb-submit-btn" class="ui-btn ui-btn-primary" style="margin-left: 128px;">保存</button>
                                <a href="http://enterprise.zheyibu.com/xjh" class="ui-btn ui-btn-primary" style="margin-left:20px; color:#666; background-color:#ddd;">取消</a>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<script src="/content/static/lib/js/base/jquery.validate.min.js"></script>
<script src="/content/static/lib/js/enterprise/js/My97DatePicker/WdatePicker.js"></script>
<script src="/content/static/lib/js/base/jquery.autocomplete.min.js"></script>
<script type="text/javascript">
    $('#xjh-form').on('focusin', '#College', function() {
        var serviceUrl = $('#College').attr('data-url');
        $(this).autocomplete({
            serviceUrl: serviceUrl,
            paramName: 'key',
            transformResult: function(response) {
                return {
                    suggestions: $.map(response.data, function(dataItem) {
                        return {
                            value: dataItem.zh,
                            data: dataItem.id
                        };
                    })
                };
            },
            dataType: 'json',
            width: 352,
            maxHeight: 192
        });
    });
    $('#xjh-form').validate({
        errorPlacement: function(error, element) { //错误提示在什么地方
            if (element.attr('name') == 'StartTime') {
                error.insertAfter("#EndTime"); //如果是StartTime呢，就EndTime后面
            } else {
                error.insertAfter(element);
            }
        },
        rules: {
            OccurDate: {
                required: true
            },
            StartTime: {
                required: true
            },
            EndTime: {
                required: {
                    depends: function() {
                        return ($('#StartTime').val() !== '');
                    }
                }
            },
            College: "required",
            Address: "required",
            Description: "required"
        },
        messages: {
            OccurDate: {
                required: "举办日期不能为空"
            },
            StartTime: {
                required: "开始时间不能为空"
            },
            EndTime: "结束时间不能为空",
            College: "举办学校不能为空",
            Description: "描述不能为空",
            Address: "具体地点不能为空"
        },
        submitHandler: function(form) {
            $("#occurDuration").val($("#StartTime").val() + "-" + $("#EndTime").val());
            form.submit();
        }

    });
</script>